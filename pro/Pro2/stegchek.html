<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç–µ–∫—Ç–æ—Ä —Å–∫—Ä—ã—Ç—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ | –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #2d3436;
            --secondary: #0984e3;
            --accent: #00cec9;
            --danger: #d63031;
            --light: #f9f9f9;
            --gray: #b2bec3;
            --border: #dfe6e9;
            --shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            --radius: 12px;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: var(--primary);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        h1 {
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .subtitle {
            color: var(--gray);
            font-size: 1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .main-app {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
        }

        @media (min-width: 768px) {
            .main-app {
                grid-template-columns: 1fr 1fr;
            }
        }

        .card {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
        }

        .card-title {
            font-size: 1.3rem;
            color: var(--secondary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }

        textarea {
            width: 100%;
            flex: 1;
            min-height: 250px;
            padding: 18px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 15px;
            line-height: 1.5;
            resize: vertical;
            transition: all 0.3s;
            background: var(--light);
            white-space: pre;
            overflow-wrap: normal;
            overflow-x: auto;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0, 206, 201, 0.2);
        }

        #inputText {
            color: var(--primary);
        }

        #outputText {
            color: var(--primary);
            font-weight: 500;
        }

        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .stat {
            text-align: center;
            padding: 12px;
            background: var(--light);
            border-radius: 8px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--secondary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-top: 5px;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: #0870c1;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: #e9ecef;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c02929;
        }

        .legend {
            margin-top: 25px;
            padding: 20px;
            background: var(--light);
            border-radius: var(--radius);
            border-left: 4px solid var(--accent);
        }

        .legend-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .symbols-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .symbol-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border: 1px solid var(--border);
        }

        .symbol-visual {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: bold;
            font-size: 14px;
            color: white;
        }

        .symbol-info {
            flex: 1;
        }

        .symbol-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .symbol-desc {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 2px;
        }

        .hidden-char {
            background: #ff7675;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: bold;
            margin: 0 1px;
            font-size: 0.9em;
        }

        .tab {
            background: #e17055;
        }

        .newline {
            background: #00b894;
        }

        .space {
            background: #74b9ff;
        }

        .zero-width {
            background: #a29bfe;
        }

        .invisible {
            background: #fd79a8;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--secondary);
            color: white;
            padding: 15px 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .tip {
            background: #fff9db;
            border: 1px solid #ffec99;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #5c3c00;
        }

        .tip strong {
            color: #e67700;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span>üîç</span> –î–µ—Ç–µ–∫—Ç–æ—Ä —Å–∫—Ä—ã—Ç—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤</h1>
            <p class="subtitle">–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤—Å–µ –Ω–µ–≤–∏–¥–∏–º—ã–µ –∏ –Ω–µ–ø–µ—á–∞—Ç–∞–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –≤–∞—à–µ–º —Ç–µ–∫—Å—Ç–µ. –ò–¥–µ–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å—Ç–µ–≥–∞–Ω–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</p>
        </header>

        <div class="main-app">
            <div class="card">
                <div class="card-title">
                    <span>üì•</span> –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
                </div>
                <textarea id="inputText" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞... 

–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å–æ —Å–∫—Ä—ã—Ç—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏: 
–ü—Ä–∏–≤–µ—Ç‚Üí–º–∏—Ä‚Üµ
–¢–∞–π–Ω—ã–π‚Üí–∫–æ–¥:‚ÄØ‚ÄØ‚ÄØ‚ê£">–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞... 

–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å–æ —Å–∫—Ä—ã—Ç—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏: 
–ü—Ä–∏–≤–µ—Ç‚Üí–º–∏—Ä‚Üµ
–¢–∞–π–Ω—ã–π‚Üí–∫–æ–¥:‚ÄØ‚ÄØ‚ÄØ‚ê£</textarea>
                
                <div class="controls">
                    <button class="btn btn-primary" id="analyzeBtn">
                        <span>üî¨</span> –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
                    </button>
                    <button class="btn btn-secondary" id="pasteBtn">
                        <span>üìã</span> –í—Å—Ç–∞–≤–∏—Ç—å –∏–∑ –±—É—Ñ–µ—Ä–∞
                    </button>
                    <button class="btn btn-danger" id="clearBtn">
                        <span>üóëÔ∏è</span> –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                </div>

                <div class="stats-panel">
                    <div class="stat">
                        <div class="stat-value" id="totalChars">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="hiddenChars">0</div>
                        <div class="stat-label">–°–∫—Ä—ã—Ç—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="visibleChars">0</div>
                        <div class="stat-label">–í–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="uniqueHidden">0</div>
                        <div class="stat-label">–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">
                    <span>üîç</span> –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä—ã—Ç—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
                </div>
                <textarea id="outputText" readonly placeholder="–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω —Ç–µ–∫—Å—Ç —Å –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–∫—Ä—ã—Ç—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏..."></textarea>
                
                <div class="tip">
                    <strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> –°–∏–º–≤–æ–ª—ã, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–æ–º ‚Äî —ç—Ç–æ –Ω–µ–≤–∏–¥–∏–º—ã–µ –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã. –û–±—ã—á–Ω—ã–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å.
                </div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-title">
                <span>üìñ</span> –õ–µ–≥–µ–Ω–¥–∞ —Å–∏–º–≤–æ–ª–æ–≤
            </div>
            <div class="symbols-grid" id="symbolLegend">
                <!-- –õ–µ–≥–µ–Ω–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Å–∫—Ä–∏–ø—Ç–æ–º -->
            </div>
        </div>

        <footer>
            <p>–î–µ—Ç–µ–∫—Ç–æ—Ä —Å–∫—Ä—ã—Ç—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏ —Å—Ç–µ–≥–∞–Ω–æ–≥—Ä–∞—Ñ–∏–∏</p>
            <p>–ü—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∏ —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –Ω–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã!</p>
        </footer>
    </div>

    <div class="notification" id="notification">
        <span id="notificationMessage">–¢–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!</span>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ DOM-—ç–ª–µ–º–µ–Ω—Ç—ã
        const inputText = document.getElementById('inputText');
        const outputText = document.getElementById('outputText');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const pasteBtn = document.getElementById('pasteBtn');
        const clearBtn = document.getElementById('clearBtn');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');
        const symbolLegend = document.getElementById('symbolLegend');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const totalCharsEl = document.getElementById('totalChars');
        const hiddenCharsEl = document.getElementById('hiddenChars');
        const visibleCharsEl = document.getElementById('visibleChars');
        const uniqueHiddenEl = document.getElementById('uniqueHidden');
        
        // –ö–∞—Ä—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
        const charMap = {
            // –ù–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã (Zero-width –∏ –¥—Ä—É–≥–∏–µ)
            '\u200B': { name: 'Zero-width Space', desc: '–ü—Ä–æ–±–µ–ª –Ω—É–ª–µ–≤–æ–π —à–∏—Ä–∏–Ω—ã', visual: '[ZWSP]', class: 'zero-width' },
            '\u200C': { name: 'Zero-width Non-joiner', desc: '–ù—É–ª–µ–≤–æ–π –Ω–µ-—Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å', visual: '[ZWNJ]', class: 'zero-width' },
            '\u200D': { name: 'Zero-width Joiner', desc: '–ù—É–ª–µ–≤–æ–π —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å', visual: '[ZWJ]', class: 'zero-width' },
            '\u200E': { name: 'Left-to-right Mark', desc: '–ú–∞—Ä–∫–µ—Ä —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ', visual: '[LRM]', class: 'invisible' },
            '\u200F': { name: 'Right-to-left Mark', desc: '–ú–∞—Ä–∫–µ—Ä —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ', visual: '[RLM]', class: 'invisible' },
            '\uFEFF': { name: 'Byte Order Mark', desc: '–ú–∞—Ä–∫–µ—Ä –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç–æ–≤', visual: '[BOM]', class: 'invisible' },
            '\u2060': { name: 'Word Joiner', desc: '–°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å —Å–ª–æ–≤', visual: '[WJ]', class: 'zero-width' },
            '\u2061': { name: 'Function Application', desc: '–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏', visual: '[FA]', class: 'invisible' },
            
            // –ü—Ä–æ–±–µ–ª—ã –∏ –æ—Ç—Å—Ç—É–ø—ã
            ' ': { name: 'Space', desc: '–û–±—ã—á–Ω—ã–π –ø—Ä–æ–±–µ–ª', visual: '‚ê£', class: 'space' },
            '\t': { name: 'Tab', desc: '–¢–∞–±—É–ª—è—Ü–∏—è (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è)', visual: '‚Üí', class: 'tab' },
            '\v': { name: 'Vertical Tab', desc: '–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç–∞–±—É–ª—è—Ü–∏—è', visual: '‚Üß', class: 'tab' },
            '\f': { name: 'Form Feed', desc: '–ü–æ–¥–∞—á–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã', visual: '[FF]', class: 'tab' },
            '\u00A0': { name: 'Non-breaking Space', desc: '–ù–µ—Ä–∞–∑—Ä—ã–≤–Ω—ã–π –ø—Ä–æ–±–µ–ª', visual: '[NBSP]', class: 'space' },
            '\u1680': { name: 'Ogham Space', desc: '–ü—Ä–æ–±–µ–ª –æ–≥–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–∏—Å—å–º–∞', visual: '[OGHAM]', class: 'space' },
            '\u180E': { name: 'Mongolian Vowel', desc: '–ú–æ–Ω–≥–æ–ª—å—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å', visual: '[MV]', class: 'space' },
            '\u2000': { name: 'En Quad', desc: '–ü—Ä–æ–±–µ–ª —à–∏—Ä–∏–Ω–æ–π –≤ en', visual: '[EN]', class: 'space' },
            '\u2001': { name: 'Em Quad', desc: '–ü—Ä–æ–±–µ–ª —à–∏—Ä–∏–Ω–æ–π –≤ em', visual: '[EM]', class: 'space' },
            '\u2002': { name: 'En Space', desc: '–ü—Ä–æ–±–µ–ª —à–∏—Ä–∏–Ω–æ–π –≤ en', visual: '[ENSP]', class: 'space' },
            '\u2003': { name: 'Em Space', desc: '–ü—Ä–æ–±–µ–ª —à–∏—Ä–∏–Ω–æ–π –≤ em', visual: '[EMSP]', class: 'space' },
            '\u2004': { name: 'Three-per-em Space', desc: '–ü—Ä–æ–±–µ–ª 1/3 em', visual: '[3/EM]', class: 'space' },
            '\u2005': { name: 'Four-per-em Space', desc: '–ü—Ä–æ–±–µ–ª 1/4 em', visual: '[4/EM]', class: 'space' },
            '\u2006': { name: 'Six-per-em Space', desc: '–ü—Ä–æ–±–µ–ª 1/6 em', visual: '[6/EM]', class: 'space' },
            '\u2007': { name: 'Figure Space', desc: '–¶–∏—Ñ—Ä–æ–≤–æ–π –ø—Ä–æ–±–µ–ª', visual: '[FIG]', class: 'space' },
            '\u2008': { name: 'Punctuation Space', desc: '–ü—É–Ω–∫—Ç—É–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–±–µ–ª', visual: '[PUNC]', class: 'space' },
            '\u2009': { name: 'Thin Space', desc: '–£–∑–∫–∏–π –ø—Ä–æ–±–µ–ª', visual: '[THIN]', class: 'space' },
            '\u200A': { name: 'Hair Space', desc: '–í–æ–ª–æ—Å–Ω–æ–π –ø—Ä–æ–±–µ–ª', visual: '[HAIR]', class: 'space' },
            '\u202F': { name: 'Narrow No-break', desc: '–£–∑–∫–∏–π –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω—ã–π –ø—Ä–æ–±–µ–ª', visual: '[NNBSP]', class: 'space' },
            '\u205F': { name: 'Medium Math Space', desc: '–°—Ä–µ–¥–Ω–∏–π –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–±–µ–ª', visual: '[MMSP]', class: 'space' },
            '\u3000': { name: 'Ideographic Space', desc: '–ò–¥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–±–µ–ª', visual: '[IDEO]', class: 'space' },
            
            // –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã –∏ –ø–µ—Ä–µ–≤–æ–¥—ã —Å—Ç—Ä–æ–∫
            '\n': { name: 'Line Feed', desc: '–ü–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ (LF)', visual: '‚Üµ', class: 'newline' },
            '\r': { name: 'Carriage Return', desc: '–í–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏ (CR)', visual: '‚Üµ', class: 'newline' },
            '\r\n': { name: 'CR+LF', desc: '–í–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏ + –ø–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏', visual: '‚Üµ', class: 'newline' },
            '\u0085': { name: 'Next Line', desc: '–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ (NEL)', visual: '[NEL]', class: 'newline' },
            '\u2028': { name: 'Line Separator', desc: '–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Å—Ç—Ä–æ–∫', visual: '[LS]', class: 'newline' },
            '\u2029': { name: 'Paragraph Separator', desc: '–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤', visual: '[PS]', class: 'newline' },
            
            // –î—Ä—É–≥–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
            '\u0000': { name: 'Null', desc: '–°–∏–º–≤–æ–ª NULL', visual: '[NUL]', class: 'invisible' },
            '\u0007': { name: 'Bell', desc: '–ó–≤–æ–Ω–æ–∫ (BEL)', visual: '[BEL]', class: 'invisible' },
            '\u0008': { name: 'Backspace', desc: '–í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —à–∞–≥ (BS)', visual: '[BS]', class: 'invisible' },
            '\u001B': { name: 'Escape', desc: '–°–∏–º–≤–æ–ª Escape (ESC)', visual: '[ESC]', class: 'invisible' },
            '\u007F': { name: 'Delete', desc: '–°–∏–º–≤–æ–ª Delete (DEL)', visual: '[DEL]', class: 'invisible' },
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –ª–µ–≥–µ–Ω–¥—É —Å–∏–º–≤–æ–ª–æ–≤
            populateLegend();
            
            // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä
            analyzeText();
        });
        
        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã —Å–∏–º–≤–æ–ª–æ–≤
        function populateLegend() {
            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Å–∏–º–≤–æ–ª—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            const categories = {
                'zero-width': [],
                'space': [],
                'tab': [],
                'newline': [],
                'invisible': []
            };
            
            // –°–æ–±–∏—Ä–∞–µ–º —Å–∏–º–≤–æ–ª—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            for (const [char, info] of Object.entries(charMap)) {
                if (categories[info.class]) {
                    categories[info.class].push({ char, ...info });
                }
            }
            
            // –û—á–∏—â–∞–µ–º –ª–µ–≥–µ–Ω–¥—É
            symbolLegend.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª—ã –≤ –ª–µ–≥–µ–Ω–¥—É
            for (const [category, symbols] of Object.entries(categories)) {
                if (symbols.length > 0) {
                    // –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                    const sampleSymbols = symbols.slice(0, 4);
                    
                    sampleSymbols.forEach(symbol => {
                        const symbolItem = document.createElement('div');
                        symbolItem.className = 'symbol-item';
                        symbolItem.innerHTML = `
                            <div class="symbol-visual ${symbol.class}">${symbol.visual}</div>
                            <div class="symbol-info">
                                <div class="symbol-name">${symbol.name}</div>
                                <div class="symbol-desc">${symbol.desc}</div>
                            </div>
                        `;
                        symbolLegend.appendChild(symbolItem);
                    });
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞
        function analyzeText() {
            const text = inputText.value;
            let output = '';
            
            let totalChars = 0;
            let hiddenChars = 0;
            let visibleChars = 0;
            const uniqueHiddenSet = new Set();
            
            // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                totalChars++;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–∏–º–≤–æ–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º
                if (charMap[char]) {
                    // –≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª
                    hiddenChars++;
                    uniqueHiddenSet.add(char);
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
                    const charInfo = charMap[char];
                    output += `<span class="hidden-char ${charInfo.class}" title="${charInfo.name}: ${charInfo.desc} (U+${char.charCodeAt(0).toString(16).toUpperCase().padStart(4, '0')})">${charInfo.visual}</span>`;
                } else {
                    // –≠—Ç–æ –æ–±—ã—á–Ω—ã–π –≤–∏–¥–∏–º—ã–π —Å–∏–º–≤–æ–ª
                    visibleChars++;
                    output += char;
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–µ
            outputText.innerHTML = output;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            totalCharsEl.textContent = totalChars;
            hiddenCharsEl.textContent = hiddenChars;
            visibleCharsEl.textContent = visibleChars;
            uniqueHiddenEl.textContent = uniqueHiddenSet.size;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ ${totalChars} —Å–∏–º–≤–æ–ª–æ–≤. –ù–∞–π–¥–µ–Ω–æ ${hiddenChars} —Å–∫—Ä—ã—Ç—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ ${uniqueHiddenSet.size > 0 ? `(${uniqueHiddenSet.size} —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤)` : ''}`);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤—Å—Ç–∞–≤–∫–∏ –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                inputText.value = text;
                analyzeText();
                showNotification('–¢–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞!');
            } catch (err) {
                showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –±—É—Ñ–µ—Ä—É –æ–±–º–µ–Ω–∞', true);
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∏–∑ –±—É—Ñ–µ—Ä–∞:', err);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞
        function clearText() {
            inputText.value = '';
            outputText.innerHTML = '';
            totalCharsEl.textContent = '0';
            hiddenCharsEl.textContent = '0';
            visibleCharsEl.textContent = '0';
            uniqueHiddenEl.textContent = '0';
            showNotification('–¢–µ–∫—Å—Ç –æ—á–∏—â–µ–Ω');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, isError = false) {
            notificationMessage.textContent = message;
            
            if (isError) {
                notification.style.background = '#d63031';
            } else {
                notification.style.background = '#0984e3';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        analyzeBtn.addEventListener('click', analyzeText);
        inputText.addEventListener('input', analyzeText);
        
        pasteBtn.addEventListener('click', pasteFromClipboard);
        
        clearBtn.addEventListener('click', clearText);
        
        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
        document.addEventListener('keydown', function(e) {
            // Ctrl+Enter –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                analyzeText();
            }
            
            // Ctrl+V –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
            if (e.ctrlKey && e.key === 'v' && document.activeElement === inputText) {
                // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –≤—Å—Ç–∞–≤–∫—É, –∑–∞—Ç–µ–º –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º
                setTimeout(analyzeText, 50);
            }
            
            // Ctrl+L –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                clearText();
            }
        });
        
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
        outputText.addEventListener('click', function() {
            // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—É—é –≤–µ—Ä—Å–∏—é –±–µ–∑ HTML —Ç–µ–≥–æ–≤
            const textToCopy = outputText.innerText;
            
            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    showNotification('–í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
                })
                .catch(err => {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏:', err);
                });
        });
    </script>
</body>
</html>